# version format
version: 0.1.0-build.{build}-{branch}

branches:
  only:
    - master

# Do not build on tags (GitHub and BitBucket)
skip_tags: true

build: off

environment:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES: true
  matrix:
    - RUBY_VERSION: 22
#    - RUBY_VERSION: 21
#    - RUBY_VERSION: 22-x64
#    - RUBY_VERSION: 21-x64

install:
  - set PATH=C:\Ruby%RUBY_FOLDER_VER%\bin;C:\Program Files\Git\mingw64\bin;%PATH%
  - bundle install
  - gem install jekyll html-proofer

init:
  - git config --global core.autocrlf input

before_test:
  - ruby -v
  - gem -v
  - bundle -v

test_script:
  - bundle exec jekyll build
  - bundle exec htmlproofer ./_site
